(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(28),i=n.n(r),s=n(3),o=n(45),u=n(17),l=(n(60),n(61),n(8)),b=n(2),j={container:{maxWidth:1170,marginLeft:"auto",marginRight:"auto",paddingLeft:15,paddingRight:15}};function d(e){var t=e.children;return Object(b.jsx)("div",{style:j.container,children:t})}n(63);var O={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUserName:function(e){return e.auth.user.name},getIsFetchingCurrentUser:function(e){return e.auth.isFetchingCurrentUser}},h=n(10),f=n.n(h),p=n(20),g=n(16),m=n.n(g),x=n(6);m.a.defaults.baseURL="https://connections-api.herokuapp.com";var v=function(e){m.a.defaults.headers.common.Authorization="Bearer ".concat(e)},y=function(){m.a.defaults.headers.common.Authorization=""},C=Object(x.c)("auth/register",function(){var e=Object(p.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/users/signup",t);case 3:return n=e.sent,a=n.data,v(a.token),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),k=Object(x.c)("auth/login",function(){var e=Object(p.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/users/login",t);case 3:return n=e.sent,a=n.data,v(a.token),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),w=Object(x.c)("auth/logout",Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/users/logout");case 3:y(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),L=Object(x.c)("auth/refresh",function(){var e=Object(p.a)(f.a.mark((function e(t,n){var a,c,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.getState(),null!==(c=a.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return v(c),e.prev=5,e.next=8,m.a.get("/users/current");case 8:return r=e.sent,i=r.data,e.abrupt("return",i);case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}()),I={register:C,logIn:k,logOut:w,fetchCurrentUser:L},N=n(19),S=n.n(N),F=function(){var e=Object(s.c)(O.getIsLoggedIn);return Object(b.jsxs)("nav",{children:[Object(b.jsx)(u.b,{exact:!0,to:"/",className:S.a.link,activeClassName:S.a.activeLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),e&&Object(b.jsx)(u.b,{exact:!0,to:"/contacts",className:S.a.link,activeClassName:S.a.activeLink,children:"Contacts"})]})},U=function(){return Object(b.jsxs)("nav",{className:"authnav",children:[Object(b.jsx)(u.b,{exact:!0,to:"/register",className:S.a.link,activeClassName:S.a.activeLink,children:"Registration"}),Object(b.jsx)(u.b,{exact:!0,to:"/login",className:S.a.link,activeClassName:S.a.activeLink,children:"Log In"})]})},B=n(47),R=n.p+"static/media/ninja.7ff23c34.png",A={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12},button:{height:50,width:50,backgroundColor:"#2196f3",borderRadius:"50%",display:"inline-block",border:"none"},icon:{color:"white",width:32,height:32}};function T(){var e=Object(s.b)(),t=Object(s.c)(O.getUserName),n=R;return Object(b.jsxs)("div",{style:A.container,children:[Object(b.jsx)("img",{src:n,alt:"",width:"32",style:A.avatar}),Object(b.jsxs)("span",{style:A.name,children:["Hello, ",t]}),Object(b.jsx)("button",{type:"button",style:A.button,onClick:function(){return e(I.logOut())},children:Object(b.jsx)(B.a,{style:A.icon})})]})}var _={header:{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:80,borderBottom:"1px solid #2A363B"}};function E(){var e=Object(s.c)(O.getIsLoggedIn);return Object(b.jsxs)("header",{style:_.header,children:[Object(b.jsx)(F,{}),e?Object(b.jsx)(T,{}):Object(b.jsx)(U,{})]})}var z=n(18),D={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};function q(){var e=Object(s.b)(),t=Object(a.useState)(""),n=Object(z.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(""),o=Object(z.a)(i,2),u=o[0],l=o[1],j=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"email":return r(a);case"password":return l(a);default:return}};return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"LogIn"}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(I.logIn({email:c,password:u})),r(""),l("")},style:D.form,autoComplete:"off",children:[Object(b.jsx)("label",{style:D.label,children:Object(b.jsx)("input",{type:"email",name:"email",value:c,onChange:j,placeholder:"Email"})}),Object(b.jsx)("label",{style:D.label,children:Object(b.jsx)("input",{type:"password",name:"password",value:u,onChange:j,placeholder:"Password"})}),Object(b.jsx)("button",{type:"submit",className:"button",children:"Login"})]})]})}var W={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};function Z(){var e=Object(s.b)(),t=Object(a.useState)(""),n=Object(z.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(""),o=Object(z.a)(i,2),u=o[0],l=o[1],j=Object(a.useState)(""),d=Object(z.a)(j,2),O=d[0],h=d[1],f=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":return r(a);case"email":return l(a);case"password":return h(a);default:return}};return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Registration"}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(I.register({name:c,email:u,password:O})),r(""),l(""),h("")},style:W.form,autoComplete:"off",children:[Object(b.jsx)("label",{style:W.label,children:Object(b.jsx)("input",{type:"text",name:"name",value:c,onChange:f,placeholder:"Name"})}),Object(b.jsx)("label",{style:W.label,children:Object(b.jsx)("input",{type:"email",name:"email",value:u,onChange:f,placeholder:"Email"})}),Object(b.jsx)("label",{style:W.label,children:Object(b.jsx)("input",{type:"password",name:"password",value:O,onChange:f,placeholder:"Password"})}),Object(b.jsx)("button",{type:"submit",className:"button",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})}var J=n(23),P=n(32),V=["children","redirectTo"];function H(e){var t=e.children,n=e.redirectTo,a=void 0===n?"/":n,c=Object(P.a)(e,V),r=Object(s.c)(O.getIsLoggedIn);return Object(b.jsx)(l.b,Object(J.a)(Object(J.a)({},c),{},{children:r?t:Object(b.jsx)(l.a,{to:a})}))}var M=["children","restricted","redirectTo"];function Y(e){var t=e.children,n=e.restricted,a=void 0!==n&&n,c=e.redirectTo,r=void 0===c?"/":c,i=Object(P.a)(e,M),o=Object(s.c)(O.getIsLoggedIn)&&a;return Object(b.jsx)(l.b,Object(J.a)(Object(J.a)({},i),{},{children:o?Object(b.jsx)(l.a,{to:r}):t}))}var $=Object(x.b)("contacts/getContactRequest"),G=Object(x.b)("contacts/getContactSuccess"),K=Object(x.b)("contacts/getContactError"),Q=Object(x.b)("contacts/addContactRequest"),X=Object(x.b)("contacts/addContactSuccess"),ee=Object(x.b)("contacts/addContactError"),te=Object(x.b)("contacts/deleteContactRequest"),ne=Object(x.b)("contacts/deleteContactSuccess"),ae=Object(x.b)("contacts/deleteContactError"),ce=Object(x.b)("contacts/UpdateFilter"),re={getContacts:function(){return function(){var e=Object(p.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t($()),e.prev=1,e.next=4,m.a.get("/contacts");case 4:n=e.sent,a=n.data,t(G(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(K(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},addContact:function(e){var t=e.name,n=e.number;return function(){var e=Object(p.a)(f.a.mark((function e(a){var c,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={name:t,number:n},a(Q()),e.prev=2,e.next=5,m.a.post("/contacts",c);case 5:r=e.sent,i=r.data,a(X(i)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),a(ee(e.t0));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},deleteContact:function(e){return function(){var t=Object(p.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(te()),t.prev=1,t.next=4,m.a.delete("/contacts/".concat(e));case 4:n(ne(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),n(ae(t.t0));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}},ie=re,se=n(22),oe=function(e){return e.contacts.items},ue=function(e){return e.contacts.filter},le=Object(se.a)([oe,ue],(function(e,t){var n=t.toLowerCase().trim();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))})),be={getItems:oe,getFilter:ue,isLoading:function(e){return e.contacts.loading},getVisibleContacts:le},je=n(30),de=n(48),Oe={label:{position:"relative"},formsContainer:{padding:15},input:{width:200,paddingLeft:30,marginBottom:30},icon:{position:"absolute",pointerEvents:"none",left:6,bottom:33}};function he(){var e=Object(a.useState)(""),t=Object(z.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),i=Object(z.a)(r,2),o=i[0],u=i[1],l=Object(s.c)(be.getItems),j=Object(s.b)(),d=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":c(a);break;case"number":u(a);break;default:return}},O=function(){c(""),u("")};return Object(b.jsx)("div",{style:Oe.formsContainer,children:Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l.some((function(e){return e.name===n}))?alert("".concat(n," already exist in contact list")):(j(ie.addContact({name:n,number:o})),O())},children:[Object(b.jsxs)("label",{style:Oe.label,children:[Object(b.jsx)("i",{style:Oe.icon,children:Object(b.jsx)(je.b,{})}),Object(b.jsx)("input",{type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,value:n,onChange:d,style:Oe.input,placeholder:"Name"})]}),Object(b.jsxs)("label",{style:Oe.label,children:[Object(b.jsx)("i",{style:Oe.icon,children:Object(b.jsx)(de.a,{})}),Object(b.jsx)("input",{type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0,value:o,onChange:d,style:Oe.input,placeholder:"Phonenumber"})]}),Object(b.jsx)("button",{type:"submit",className:"button",children:"Add contact"})]})})}var fe={label:{position:"relative"},input:{width:380,paddingLeft:30,marginBottom:30},icon:{position:"absolute",pointerEvents:"none",left:6,bottom:-2}};function pe(){var e=Object(s.c)(be.getFilter),t=Object(s.b)();return Object(b.jsxs)("label",{style:fe.label,children:[Object(b.jsx)("i",{style:fe.icon,children:Object(b.jsx)(je.a,{})}),Object(b.jsx)("input",{type:"text",value:e,onChange:function(e){return t(ce(e.target.value))},style:fe.input})]})}var ge=n(49),me=n.n(ge),xe={itemText:{marginRight:40,display:"flex",justifyContent:"space-between",width:400},item:{display:"flex",alignItems:"baseline",justifyContent:"space-between",marginBottom:20},itemName:{fontWeight:600,marginRight:15},itemNum:{marginRight:30}};function ve(){var e=Object(s.c)(be.getVisibleContacts),t=Object(s.c)(be.isLoading),n=Object(s.b)();return Object(a.useEffect)((function(){n(ie.getContacts())}),[n]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("ul",{children:e.map((function(e){var t=e.id,a=e.name,c=e.number;return Object(b.jsxs)("li",{style:xe.item,children:[Object(b.jsxs)("span",{style:xe.itemText,children:[Object(b.jsxs)("span",{style:xe.itemName,children:[a,":"]}),Object(b.jsx)("span",{style:xe.itemNum,children:c})]}),Object(b.jsx)("button",{type:"button",onClick:function(){return n(ie.deleteContact(t))},className:"button",children:"Delete"})]},t)}))}),t&&Object(b.jsx)(me.a,{type:"Oval",color:"#00BFFF",height:80,width:80})]})}function ye(){var e={container:{marginBottom:40,marginTop:40,display:"flex",gap:120},contactsContainer:{padding:15}};return Object(b.jsxs)("div",{style:e.container,children:[Object(b.jsx)(he,{}),Object(b.jsxs)("div",{style:e.contactsContainer,children:[Object(b.jsx)(pe,{}),Object(b.jsx)(ve,{})]})]})}var Ce=n.p+"static/media/Book-icon-bible.85868424.png",ke={text:{fontSize:52,marginTop:60,textAlign:"center"},img:{width:200,marginLeft:455,marginTop:50}};function we(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("img",{src:Ce,alt:"Book",style:ke.img}),Object(b.jsx)("div",{style:ke.text,children:"Welcome to ContactsApp!"})]})}var Le,Ie,Ne,Se,Fe=function(){var e=Object(s.b)(),t=Object(s.c)(O.getIsFetchingCurrentUser);return Object(a.useEffect)((function(){e(I.fetchCurrentUser())}),[e]),!t&&Object(b.jsxs)(d,{children:[Object(b.jsx)(E,{}),Object(b.jsxs)(l.d,{children:[Object(b.jsx)(Y,{path:"/",exact:!0,children:Object(b.jsx)(we,{})}),Object(b.jsx)(H,{path:"/contacts",redirectTo:"/login",children:Object(b.jsx)(ye,{})}),Object(b.jsx)(Y,{path:"/register",restricted:!0,children:Object(b.jsx)(Z,{})}),Object(b.jsx)(Y,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(b.jsx)(q,{})})]})]})},Ue=n(31),Be=n(21),Re=n(50),Ae=n.n(Re),Te=n(4),_e=n(9),Ee=Object(x.d)([],(Le={},Object(Te.a)(Le,G,(function(e,t){return t.payload})),Object(Te.a)(Le,X,(function(e,t){var n=t.payload;return[].concat(Object(Ue.a)(e),[n])})),Object(Te.a)(Le,ne,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),Le)),ze=Object(x.d)("",Object(Te.a)({},ce,(function(e,t){return t.payload}))),De=Object(x.d)(!1,(Ie={},Object(Te.a)(Ie,$,(function(){return!0})),Object(Te.a)(Ie,G,(function(){return!1})),Object(Te.a)(Ie,K,(function(){return!1})),Object(Te.a)(Ie,Q,(function(){return!0})),Object(Te.a)(Ie,X,(function(){return!1})),Object(Te.a)(Ie,ee,(function(){return!1})),Object(Te.a)(Ie,te,(function(){return!0})),Object(Te.a)(Ie,ne,(function(){return!1})),Object(Te.a)(Ie,ae,(function(){return!1})),Ie)),qe=Object(x.d)(null,(Ne={},Object(Te.a)(Ne,ee,(function(e,t){return t.payload.message})),Object(Te.a)(Ne,K,(function(e,t){return t.payload.message})),Object(Te.a)(Ne,ae,(function(e,t){return t.payload.message})),Object(Te.a)(Ne,$,(function(){return null})),Object(Te.a)(Ne,Q,(function(){return null})),Object(Te.a)(Ne,te,(function(){return null})),Object(Te.a)(Ne,ce,(function(){return null})),Ne)),We=Object(_e.b)({items:Ee,filter:ze,loading:De,error:qe}),Ze=Object(x.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(Se={},Object(Te.a)(Se,I.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(Te.a)(Se,I.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(Te.a)(Se,I.logOut.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(Te.a)(Se,I.fetchCurrentUser.pending,(function(e){e.isFetchingCurrentUser=!0})),Object(Te.a)(Se,I.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isFetchingCurrentUser=!1})),Object(Te.a)(Se,I.fetchCurrentUser.rejected,(function(e){e.isFetchingCurrentUser=!1})),Se)}).reducer,Je=Object(Ue.a)(Object(x.f)({serializableCheck:{ignoredActions:[Be.a,Be.f,Be.b,Be.c,Be.d,Be.e]}})),Pe={key:"auth",storage:Ae.a,whitelist:["token"]},Ve=Object(x.a)({reducer:{auth:Object(Be.g)(Pe,Ze),contacts:We},middleware:Je,devTools:!1}),He=Object(Be.h)(Ve);i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(s.a,{store:Ve,children:Object(b.jsx)(o.a,{loading:null,persistor:He,children:Object(b.jsx)(u.a,{children:Object(b.jsx)(Fe,{})})})})}),document.getElementById("root"))},19:function(e,t,n){e.exports={link:"Navigation_link__1LLZS",activeLink:"Navigation_activeLink__2IYFt Navigation_link__1LLZS",authnav:"Navigation_authnav__BJyt7"}},61:function(e,t,n){},63:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.54eeb83e.chunk.js.map